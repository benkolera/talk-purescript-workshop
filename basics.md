# Purescript Basics

Purescript is a haskelly-like language that compiles down to javascript. Because it is based around
modules already, it can be exported JS files with either CommonJS or amd module definitions.

## Tooling and Building

### Bower

For better or worse, the purescript compiler actually ships with no std library or prelude, so
the purescript compiler by itself is actually useless (we don't even have numbers, strings or anything!).
To bring in dependencies, purescript has decided on bower. This is largely based on NPM 2's ugly handling
of sub dependencies ( http://harry.garrood.me/blog/purescript-why-bower/ ) and may change to NPM once
3 gets settled in, but for now know that any purescript application also needs bower!

### Psc 

Psc is the compile. You won't ever use it directly because you'll need to be using something that is 
including your bower dependencies in the build, but it's helpful to know how it works and how it emits
JS!

```
bkolera at Bens-MacBook-Pro in ~/src/talk-purescript-workshop (master●)
$ psc bower_components/purescript-prelude/src/Prelude.purs src/BasicsEx/ModulesAndFunctions.purs

bkolera at Bens-MacBook-Pro in ~/src/talk-purescript-workshop (master●)
$ cat output/ModulesAndFunctions/index.js
// Generated by psc version 0.7.6.1
"use strict";
var Prelude = require("Prelude");
var gimme5 = function (x) {
    return x + 5 | 0;
};
module.exports = {
    gimme5: gimme5
};
```

As you can see, with Ints it hasn't wrapped the value up in any crazy object or anything. It's 
one of purescripts goals to keep its primitives as close to JS as possible to make it easily 
callable from JS.

### Psci 

Psci is the purescript REPL. Again, like psc you'll need to use a higher level tool to actually
make it useable. We're going to use pulp for this.

The two most useful things are running code by hand and also inspecting the type of something.

```
bkolera at Bens-MacBook-Pro in ~/src/talk-purescript-workshop (master●)
$ pulp psci
 ____                 ____            _       _
 |  _ \ _   _ _ __ ___/ ___|  ___ _ __(_)_ __ | |_
 | |_) | | | | '__/ _ \___ \ / __| '__| | '_ \| __|
 |  __/| |_| | | |  __/___) | (__| |  | | |_) | |_
 |_|    \__,_|_|  \___|____/ \___|_|  |_| .__/ \__|
                                        |_|

:? shows help
> import Basics.ModulesAndFunctions
> gimme5 5
10

> :t gimme5
Int -> Int
```

### Webpack

Pulp provides a server mode that uses webpack which rebuilds on file changes but doesn't include
any way to livereload the webpage in the browser when you make a change. There's no way to fix
this without just rolling your own webpack conf, so that's what I've done! :)

The only thing that you may want to understand is that the entry point is defined in entry.js. It 
has some mess in it to convince webpack dev server to reload when we change a purs file, but it's
proper job is to run our Main.main function.

If you ever want one of your PS functions or modules out in the global context to play with in 
the browser, you could attach it to global here. 

Either way, know that there is very little magic here. No crazy runtimes or anything. Really its
just JS (and fairly readable JS at that).

## Modules, Functions and Reading Types

## Data Types, Records and Pattern Matching

## Effects

## Lenses

## Further reading

https://leanpub.com/purescript/read#leanpub-auto-functions-and-records

https://leanpub.com/purescript/read#leanpub-auto-pattern-matching

https://leanpub.com/purescript/read#leanpub-auto-the-eff-monad

## Next, playing around with Thermite!

Scoot over to the [thermite.md|Examples] and see how you go! :)
